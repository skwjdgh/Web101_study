<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>개인 포트폴리오 웹 애플리케이션 v2.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="마크다운 지원과 동적 카테고리 시스템을 갖춘 개인 포트폴리오 관리 도구">
  <meta name="keywords" content="포트폴리오, 콘텐츠 관리, 마크다운, 카테고리, 개인 웹사이트">
  <meta name="author" content="Portfolio App">
  
  <!-- 파비콘 -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📁</text></svg>">
  
  <!-- CSS 파일 -->
  <link rel="stylesheet" href="css/style.css">
  
  <!-- 폰트 프리로드 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- 성능 최적화를 위한 리소스 힌트 -->
  <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
  
  <!-- 마크다운 라이브러리 프리로드 -->
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js" as="script">
</head>
<body>
  <!-- 로딩 스크린 -->
  <div id="loadingScreen" style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  ">
    <div style="margin-bottom: 20px;">
      <div style="
        width: 60px;
        height: 60px;
        border: 4px solid rgba(255,255,255,0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      "></div>
    </div>
    <h2 style="margin: 0; font-size: 24px; font-weight: 300;">포트폴리오 로딩 중...</h2>
    <p style="margin: 10px 0 0 0; opacity: 0.8; font-size: 14px;">잠시만 기다려주세요</p>
    
    <style>
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </div>

  <!-- 메인 컨테이너 -->
  <div class="container" style="opacity: 0; transition: opacity 0.5s ease-in-out;">

    <!-- 사이드바 영역 -->
    <aside class="side-area">
      <!-- 프로필 섹션 -->
      <div class="profile-box" id="profileBox" title="클릭하여 프로필 편집">
        <img src="" alt="프로필" class="profile-img" id="profileImg" style="display:none;">
        <div id="profileImgDefault" style="
          width: 120px; 
          height: 120px; 
          border-radius: 50%; 
          background: #ddd; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          margin-bottom: 20px;
          position: relative;
        ">
          <span style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
            line-height: 1;
          ">👤</span>
        </div>
        <div class="profile-desc" id="profileDesc1">개발자 포트폴리오</div>
        <div class="profile-desc" id="profileDesc2">웹 개발 전문</div>
        <div class="profile-desc" id="profileDesc3">JavaScript & React</div>
        <div id="profileLinkList"></div>
      </div>
      
      <!-- 기본 링크 박스들 -->
      <div class="link-box" onclick="window.open('https://github.com', '_blank')" title="GitHub 프로필">
        <div class="link-img" style="background: #333; color: white; display: flex; align-items: center; justify-content: center; font-size: 16px;">📁</div>
        <div class="link-url">GitHub</div>
      </div>
      
      <div class="link-box" onclick="window.open('https://velog.io', '_blank')" title="Velog 블로그">
        <div class="link-img" style="background: #20c997; color: white; display: flex; align-items: center; justify-content: center; font-size: 16px;">📝</div>
        <div class="link-url">Velog 블로그</div>
      </div>
      
      <div class="link-box" onclick="window.open('https://notion.so', '_blank')" title="Notion 페이지">
        <div class="link-img" style="background: #000; color: white; display: flex; align-items: center; justify-content: center; font-size: 16px;">📋</div>
        <div class="link-url">Notion</div>
      </div>
    </aside>

    <!-- 메인 영역 -->
    <main class="main-area">
      <!-- 메인 배너 -->
      <div class="main-banner">
        <div class="slider-wrapper">
          <div class="slide" style="background-image: url(./media/이미지1.jpg);"></div>
          <div class="slide" style="background-image: url(./media/이미지2.jpg);"></div>
        </div>
        <p class="banner-text">✨ 나만의 포트폴리오 공간 ✨</p>

        <div class="slider-dots">
          <div class="dot"></div>
          <div class="dot"></div>
        </div>

        <button class="banner-btn" onclick="bannerInstance.showBannerModal()">🖼️</button>
      </div>
      
      <!-- 카테고리 탭 영역 -->
      <div class="category-container">
        <div class="category-tab active" data-category="all" title="모든 콘텐츠 보기">📚 전체</div>
        <div class="category-tab" data-category="projects" title="프로젝트 콘텐츠만 보기">💻 프로젝트</div>
        <div class="category-tab" data-category="blog" title="블로그 콘텐츠만 보기">📝 블로그</div>
        <div class="category-tab" data-category="study" title="스터디 콘텐츠만 보기">📖 스터디</div>
        <button class="add-category-btn" onclick="addNewCategory()" title="새 카테고리 추가 (Ctrl+Shift+C)">+</button>
      </div>
      
      <!-- 메인 콘텐츠 영역 -->
      <div class="content-area" id="contentArea">
        <div style="margin-bottom: 20px;">
          <h2 style="color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; font-size: 24px;">
            📋 최근 작성된 내용
          </h2>
          <div style="font-size: 14px; color: #666; margin-bottom: 20px;">
            <strong>사용법:</strong> 
            더블클릭으로 새 콘텐츠 추가 (Ctrl+Shift+N) | 
            우클릭으로 메뉴 열기 | 
            썸네일 클릭으로 상세보기 | 
            썸네일 우클릭으로 편집/삭제
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 푸터 -->
  <footer class="footer-area">
    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
      <span>Copyright © 2024 My Portfolio. All rights reserved.</span>
      <div style="font-size: 12px; opacity: 0.7;">
        <span id="appVersion">v2.0</span> | 
        <span id="lastSaved">자동 저장됨</span> | 
        <span id="onlineStatus">🌐 온라인</span>
      </div>
    </div>
  </footer>

  <!-- JavaScript 파일들 -->
  <script src="js/modalUtils.js"></script>
  <script src="js/sidebar.js"></script>
  <script src="js/banner.js"></script>
  <script src="js/category.js"></script>
  <script src="js/content.js"></script>
  <script src="js/main.js"></script>

  <!-- 로딩 스크린 제거 및 앱 표시 스크립트 -->
  <script>
    // 앱 초기화 완료 시 로딩 스크린 제거
    document.addEventListener('app:initialized', function() {
      const loadingScreen = document.getElementById('loadingScreen');
      const container = document.querySelector('.container');
      
      if (loadingScreen && container) {
        // 페이드 아웃 효과
        loadingScreen.style.opacity = '0';
        loadingScreen.style.transition = 'opacity 0.5s ease-out';
        
        // 메인 컨테이너 표시
        container.style.opacity = '1';
        
        // 로딩 스크린 제거
        setTimeout(() => {
          loadingScreen.remove();
        }, 500);
      }
      
      // 푸터 정보 업데이트
      updateFooterInfo();
    });

    // 최대 로딩 시간 제한 (10초)
    setTimeout(function() {
      const loadingScreen = document.getElementById('loadingScreen');
      const container = document.querySelector('.container');
      
      if (loadingScreen) {
        console.warn('로딩 시간 초과, 강제로 앱을 표시합니다.');
        loadingScreen.style.opacity = '0';
        container.style.opacity = '1';
        setTimeout(() => loadingScreen.remove(), 500);
      }
    }, 10000);

    // 푸터 정보 업데이트 함수
    function updateFooterInfo() {
      const versionEl = document.getElementById('appVersion');
      const savedEl = document.getElementById('lastSaved');
      const statusEl = document.getElementById('onlineStatus');
      
      if (window.app) {
        const info = window.app.getInfo();
        if (versionEl) versionEl.textContent = `v${info.version}`;
      }
      
      if (savedEl) {
        const now = new Date();
        savedEl.textContent = `저장됨 ${now.toLocaleTimeString('ko-KR')}`;
      }
      
      if (statusEl) {
        statusEl.textContent = navigator.onLine ? '🌐 온라인' : '📴 오프라인';
      }
    }

    // 온라인/오프라인 상태 변경 감지
    window.addEventListener('online', updateFooterInfo);
    window.addEventListener('offline', updateFooterInfo);

    // 5분마다 자동 저장 및 푸터 정보 업데이트
    setInterval(function() {
      if (window.app && window.app.isReady()) {
        try {
          window.app.saveAllData();
          updateFooterInfo();
        } catch (error) {
          console.error('자동 저장 실패:', error);
        }
      }
    }, 300000); // 5분

    // 페이지 가시성 변경 시 저장 (탭 변경, 창 최소화 등)
    document.addEventListener('visibilitychange', function() {
      if (document.hidden && window.app && window.app.isReady()) {
        try {
          window.app.saveAllData();
          console.log('📄 페이지 숨김으로 인한 자동 저장 완료');
        } catch (error) {
          console.error('페이지 숨김 저장 실패:', error);
        }
      }
    });

    // 접근성 개선: 키보드 네비게이션 지원
    document.addEventListener('keydown', function(e) {
      // Tab 키 네비게이션 시각적 피드백
      if (e.key === 'Tab') {
        document.body.classList.add('keyboard-navigation');
      }
    });

    document.addEventListener('mousedown', function() {
      document.body.classList.remove('keyboard-navigation');
    });

    // 성능 모니터링 (개발 모드에서만)
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      // First Contentful Paint 측정
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          console.log(`🎨 ${entry.name}: ${entry.startTime.toFixed(2)}ms`);
        }
      }).observe({entryTypes: ['paint']});

      // Largest Contentful Paint 측정  
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          console.log(`🖼️ LCP: ${entry.startTime.toFixed(2)}ms`);
        }
      }).observe({entryTypes: ['largest-contentful-paint']});
    }
  </script>

  <!-- 접근성을 위한 CSS -->
  <style>
    /* 키보드 네비게이션 시각적 피드백 */
    .keyboard-navigation *:focus {
      outline: 2px solid #007bff !important;
      outline-offset: 2px !important;
    }

    /* 고대비 모드 지원 */
    @media (prefers-contrast: high) {
      .content-thumbnail {
        border: 2px solid #000 !important;
      }
      
      .category-tab {
        border: 1px solid #000 !important;
      }
    }

    /* 움직임 감소 선호 사용자 지원 */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* 다크모드 지원 준비 */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #1a1a1a;
        --text-color: #ffffff;
        --border-color: #404040;
      }
    }

    /* 프린트 스타일 */
    @media print {
      .side-area, .banner-btn, .add-category-btn, .footer-area {
        display: none !important;
      }
      
      .main-area {
        width: 100% !important;
      }
      
      .content-thumbnail {
        page-break-inside: avoid;
        border: 1px solid #000 !important;
        margin-bottom: 20px !important;
      }
    }
  </style>

  <!-- SEO를 위한 구조화된 데이터 -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "개인 포트폴리오 웹 애플리케이션",
    "description": "마크다운 지원과 동적 카테고리 시스템을 갖춘 개인 포트폴리오 관리 도구",
    "applicationCategory": "ProductivityApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "KRW"
    },
    "featureList": [
      "마크다운 에디터",
      "동적 카테고리 관리", 
      "로컬 데이터 저장",
      "반응형 디자인",
      "일정 관리",
      "프로필 관리"
    ]
  }
  </script>
</body>
</html>